#!/bin/bash
#
# X server startup behavior for xinit
# 
# Passing TTY to X tells it to start in that TTY instead of a new one. This is ideal
# because the new one will not be an authenticated session.
#

TTY=${TTY:-$(tty)}
TTY=${TTY#/dev/}

if [[ $TTY != tty* ]]; then
  printf '==> ERROR: invalid TTY\n' >&2
  exit 1
fi

printf -v vt 'vt%02d' "${TTY#tty}"

exec /usr/bin/X -nolisten tcp "$vt" "$@"
